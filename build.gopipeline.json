{
    "name": "backoffice-build-docker-image",
    "group": "backoffice",
    "enable_pipeline_locking": true,
    "environment_variables": [],
    "materials": [
        {
            "url": "git@github.com:Convious/backoffice.git",
            "type": "git",
            "name": "source",
            "filter": {
                "ignore": [
                    "docker-compose.override.yml"
                ]
            }
        }
    ],
    "stages": [
        {
            "name": "build",
            "jobs": [
                {
                    "name": "build",
                    "tasks": [
                        {
                            "type": "exec",
                            "command": "/bin/bash",
                            "arguments": [ "-c", "./bin/build.sh $GO_PIPELINE_COUNTER" ]
                        },
                        {
                            "type": "exec",
                            "command": "/bin/bash",
                            "arguments": [ "-c", "./bin/test.sh $GO_PIPELINE_COUNTER" ]
                        },
                        {
                            "type": "exec",
                            "command": "/bin/bash",
                            "arguments": [ "-c", "./bin/push.sh $GO_PIPELINE_COUNTER" ]
                        }
                    ],
                    "artifacts": [
                        {
                            "source": "dist/coverage",
                            "destination": "",
                            "type": "build"
                        },
                        {
                            "source": "dist/test_report.xml",
                            "destination": "",
                            "type": "test"
                        },
                        {
                            "source": "dist/test_report",
                            "destination": "",
                            "type": "build"
                        },
                        {
                            "source": "bin",
                            "destination": "",
                            "type": "build"
                        },
                        {
                            "source": "commit.txt",
                            "destination": "",
                            "type": "build"
                        }
                    ],
                    "tabs": [
                        {
                            "name": "Coverage",
                            "path": "coverage/index.html"
                        },
                        {
                            "name": "Test_Report",
                            "path": "test_report/test_report.html"
                        }
                    ]
                }
            ]
        }
    ]
}
